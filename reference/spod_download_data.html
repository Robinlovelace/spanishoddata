<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download the data files of specified type, zones, and dates — spod_download_data • spanishoddata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download the data files of specified type, zones, and dates — spod_download_data"><meta name="description" content="This function downloads the data files of the specified type, zones, dates and data version."><meta property="og:description" content="This function downloads the data files of the specified type, zones, dates and data version."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spanishoddata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/work-with-v1-data.html">Working with v1 MITMA data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Robinlovelace/spanishoddata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Download the data files of specified type, zones, and dates</h1>
      <small class="dont-index">Source: <a href="https://github.com/Robinlovelace/spanishoddata/blob/main/R/download_data.R" class="external-link"><code>R/download_data.R</code></a></small>
      <div class="d-none name"><code>spod_download_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function downloads the data files of the specified type, zones, dates and data version.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spod_download_data</span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"od"</span>, <span class="st">"origin-destination"</span>, <span class="st">"os"</span>, <span class="st">"overnight_stays"</span>, <span class="st">"tpp"</span>,</span>
<span>    <span class="st">"trips_per_person"</span><span class="op">)</span>,</span>
<span>  zones <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"districts"</span>, <span class="st">"dist"</span>, <span class="st">"distr"</span>, <span class="st">"distritos"</span>, <span class="st">"municipalities"</span>, <span class="st">"muni"</span>,</span>
<span>    <span class="st">"municip"</span>, <span class="st">"municipios"</span>, <span class="st">"lau"</span>, <span class="st">"large_urban_areas"</span>, <span class="st">"gau"</span>, <span class="st">"grandes_areas_urbanas"</span><span class="op">)</span>,</span>
<span>  dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_dir <span class="op">=</span> <span class="fu"><a href="spod_get_data_dir.html">spod_get_data_dir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return_output <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The type of data to download. Can be <code>"origin-destination"</code> (or ust <code>"od"</code>), or <code>"trips_per_person"</code> (or just <code>"tpp"</code>) for v1 data. For v2 data <code>"overnight_stays"</code> (or just <code>"os"</code>) is also available. More data types to be supported in the future. See respective codebooks for more information. <strong>ADD CODEBOOKS! to the package</strong></p></dd>


<dt id="arg-zones">zones<a class="anchor" aria-label="anchor" href="#arg-zones"></a></dt>
<dd><p>The zones for which to download the data. Can be <code>"districts"</code> (or <code>"dist"</code>, <code>"distr"</code>, or the original Spanish <code>"distritos"</code>) or <code>"municipalities"</code> (or <code>"muni"</code>, <code>"municip"</code>, or the original Spanish <code>"municipios"</code>) for both data versions. Additionaly, these can be <code>"large_urban_areas"</code> (or <code>"lau"</code>, or the original Spanish <code>"grandes_areas_urbanas"</code>, or <code>"gau"</code>) for v2 data (2022 onwards).</p></dd>


<dt id="arg-dates">dates<a class="anchor" aria-label="anchor" href="#arg-dates"></a></dt>
<dd><p>A <code>character</code> or <code>Date</code> vector of dates to process. Kindly keep in mind that v1 and v2 data follow different data collection methodologies and may not be directly comparable. Therefore, do not try to request data from both versions for the same date range. If you need to compare data from both versions, please refer to the respective codebooks and methodology documents. The v1 data covers the period from 2020-02-14 to 2021-05-09, and the v2 data covers the period from 2022-01-01 to the present until further notice. The true dates range is checked against the available data for each version on every function run.</p>
<p>The possible values can be any of the following:</p><ul><li><p>A single date in ISO (YYYY-MM-DD) or YYYYMMDD format. <code>character</code> or <code>Date</code> object.</p></li>
<li><p>A vector of dates in ISO (YYYY-MM-DD) or YYYYMMDD format. <code>character</code> or <code>Date</code> object. Can be any non-consecutive sequence of dates.</p></li>
<li><p>A date range</p><ul><li><p>eigher a <code>character</code> or <code>Date</code> object of length 2 with clearly named elements <code>start</code> and <code>end</code> in ISO (YYYY-MM-DD) or YYYYMMDD format. E.g. <code>c(start = "2020-02-15", end = "2020-02-17")</code>;</p></li>
<li><p>or a <code>character</code> object of the form <code>YYYY-MM-DD_YYYY-MM-DD</code> or <code>YYYYMMDD_YYYYMMDD</code>. For example, <code>2020-02-15_2020-02-17</code> or <code>20200215_20200217</code>.</p></li>
</ul></li>
<li><p>A regular expression to match dates in the format <code>YYYYMMDD</code>. <code>character</code> object. For example, <code>^202002</code> will match all dates in February 2020.</p></li>
</ul></dd>


<dt id="arg-data-dir">data_dir<a class="anchor" aria-label="anchor" href="#arg-data-dir"></a></dt>
<dd><p>The directory where the data is stored. Defaults to the value returned by <code><a href="spod_get_data_dir.html">spod_get_data_dir()</a></code> which returns the value of the environment variable <code>SPANISH_OD_DATA_DIR</code> or a temporary directory if the variable is not set.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>A logical value indicating whether to suppress messages. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-return-output">return_output<a class="anchor" aria-label="anchor" href="#arg-return-output"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, the function returns a character vector of the paths to the downloaded files. If <code>FALSE</code>, the function returns <code>NULL</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector of the paths to the downloaded files. Unless <code>return_output = FALSE</code>, in which case the function returns <code>NULL</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Download the origin-destination on district level for the a date range in March 2020</span></span></span>
<span class="r-in"><span><span class="fu">spod_download_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"od"</span>, zones <span class="op">=</span> <span class="st">"districts"</span>,</span></span>
<span class="r-in"><span>  date_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-03-20"</span>, <span class="st">"2020-03-24"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download the origin-destination on district level for select dates in 2020 and 2021</span></span></span>
<span class="r-in"><span><span class="fu">spod_download_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"od"</span>, zones <span class="op">=</span> <span class="st">"dist"</span>,</span></span>
<span class="r-in"><span>  dates_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-03-20"</span>, <span class="st">"2020-03-24"</span>, <span class="st">"2021-03-20"</span>, <span class="st">"2021-03-24"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download the origin-destination on municipality level using regex for a date range in March 2020</span></span></span>
<span class="r-in"><span><span class="co"># (the regex will capture the dates 2020-03-20 to 2020-03-24)</span></span></span>
<span class="r-in"><span><span class="fu">spod_download_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"od"</span>, zones <span class="op">=</span> <span class="st">"municip"</span>,</span></span>
<span class="r-in"><span>  date_regex <span class="op">=</span> <span class="st">"2020032[0-4]"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Egor Kotov, Robin Lovelace.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

